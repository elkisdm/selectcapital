const STORAGE_KEY="select-capital:theme",THEMES=["light","dark"],prefersDark=window.matchMedia("(prefers-color-scheme: dark)");function getDocEl(){return document.documentElement}function syncMetaTheme(e){const t=document.querySelector('meta[name="theme-color"]');if(!t)return;const r=getDocEl(),c=getComputedStyle(r).getPropertyValue("--sc-meta-theme-color"),n="dark"===e?"#05080F":"#F6F8FC";t.setAttribute("content",c&&c.trim()||n)}function persistTheme(e){try{window.localStorage.setItem(STORAGE_KEY,e)}catch(e){}}function readStoredTheme(){try{return window.localStorage.getItem(STORAGE_KEY)}catch(e){return null}}export function applySelectTheme(e){if(!THEMES.includes(e))return;const t=getDocEl();t.setAttribute("data-theme",e),t.style.setProperty("color-scheme","dark"===e?"dark":"light"),persistTheme(e),syncMetaTheme(e)}export function getCurrentSelectTheme(){const e=getDocEl().getAttribute("data-theme");return e&&THEMES.includes(e)?e:null}export function toggleSelectTheme(){applySelectTheme("dark"===(getCurrentSelectTheme()||"dark")?"light":"dark")}export function initSelectTheme(e={}){const{defaultTheme:t="dark",respectSystem:r=!0,enablePrefersChange:c=!0,toggleSelector:n="[data-theme-toggle]",valueSelector:a="[data-theme-value]"}=e,l=readStoredTheme(),o=prefersDark.matches?"dark":"light";applySelectTheme(l||(r?o:null)||t),c&&prefersDark.addEventListener("change",e=>{readStoredTheme()||applySelectTheme(e.matches?"dark":"light")}),document.addEventListener("click",e=>{e.target.closest(n)&&(e.preventDefault(),toggleSelectTheme())}),document.addEventListener("click",e=>{const t=e.target.closest(a);if(t){e.preventDefault();const r=t.getAttribute("data-theme-value");THEMES.includes(r)&&applySelectTheme(r)}})}"loading"!==document.readyState?initSelectTheme():document.addEventListener("DOMContentLoaded",()=>initSelectTheme());